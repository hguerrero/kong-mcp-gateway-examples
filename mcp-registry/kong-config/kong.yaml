_format_version: "3.0"
vaults:
  - name: konnect
    prefix: kv
    config:
      config_store_id: a3a8af24-7515-4db1-a9d6-a4a169d4ea73
plugins:
  - name: request-transformer-advanced
    instance_name: registry-api-auth-headers
    route: registry-api-route
    config:
      add:
        headers:
          - "{vault://kv/KONNECT_TOKEN}"
  - config:
      logging:
        log_payloads: true
        log_statistics: true
      max_request_body_size: 16384
      mode: conversion-listener
      tools:
        - annotations:
            title: MCP Registry Servers List
          description: Returns a list of all registered MCP servers
          parameters:
          - name: cursor
            in: query
            description: |
              Pagination cursor for retrieving next set of results.

              Cursors are opaque strings returned in the `metadata.nextCursor` field of paginated responses. Always use the exact cursor value returned by the API.
            required: false
            schema:
              type: string
          - name: limit
            in: query
            description: Maximum number of items to return
            required: false
            schema:
              type: integer
          - name: search
            in: query
            description: Search servers by name (substring match)
            required: false
            schema:
              type: string
              example: "filesystem"
          - name: updated_since
            in: query
            description: Filter servers updated since timestamp (RFC3339 datetime)
            required: false
            schema:
              type: string
              format: date-time
              example: "2025-08-07T13:15:04.280Z"
          - name: version
            in: query
            description: Filter by version ('latest' for latest version, or an exact version like '1.2.3')
            required: false
            schema:
              type: string
              example: "1.2.3"
          method: GET
          host: host.docker.internal
          path: /api/registry/v0/registries/b5fb0a06-10d6-412a-817f-ad629289916a/v0/servers
          scheme: https
    enabled: true
    name: ai-mcp-proxy
    instance_name: registry-mcp
    route: registry-mcp-route
services:
- name: registry-api-service
  url: https://klabs.us.api.konghq.com
  routes:
  - name: registry-api-route
    paths:
    - /api/registry
- name: registry-mcp-service
  url: https://host.docker.internal:8443
  routes:
  - name: registry-mcp-route
    paths:
    - /mcp/registry
